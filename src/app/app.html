<h1>Amazon Visa to YNAB converter</h1>

<p>
  This tool converts the transaction export of the
  <a href="https://www.amazon.de/cobrandcard/product/B0CN8XJB15" rel="nofollow">Amazon Visa card</a>
  offered in Germany and Austria to a CSV file that can be imported by
  <a href="https://www.ynab.com/" rel="nofollow">YNAB</a>.
</p>

<p>
  The data is only processed within your browser and does not leave your computer.
</p>

<form (submit)="submit()">
  <div class="form-group">
    <label for="file">File</label>
    <input type="file" id="file" required #fileInput (change)="onChange()">
  </div>
  <div class="submit-row">
    <button type="submit">Process</button>
  </div>

  @if (link(); as lnk) {
    <p><a [href]="lnk" download>Download converted CSV</a></p>
  }

  @if (errors(); as err) {
    <div>
      <h2>Errors:</h2>
      <pre>{{err}}</pre>
    </div>
  }

  @if (transactions(); as t) {
    <table>
      <thead>
      <tr>
        <th>Date</th>
        <th>Payee</th>
        <th>Memo</th>
        <th>Amount</th>
      </tr>
      </thead>
      <tbody>
        @for (transaction of t; track $index) {
          <tr>
            <td>{{transaction.date}}</td>
            <td>{{transaction.payee}}</td>
            <td></td>
            <td>{{transaction.amount}}</td>
          </tr>
        }
      </tbody>
    </table>
  }

</form>
